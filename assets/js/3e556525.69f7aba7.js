"use strict";(self.webpackChunkweb3auth_docs=self.webpackChunkweb3auth_docs||[]).push([[58687],{24633:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var r=n(85893),a=n(11151),i=n(85162),o=n(74866);const s={title:"Multi Factor Authentication in PnP Android SDK",sidebar_label:"Multi Factor Authentication",displayed_sidebar:"sdk",description:"Web3Auth PnP Android SDK - Multi Factor Authentication | Documentation - Web3Auth"},l=void 0,c={id:"sdk/pnp/android/mfa",title:"Multi Factor Authentication in PnP Android SDK",description:"Web3Auth PnP Android SDK - Multi Factor Authentication | Documentation - Web3Auth",source:"@site/docs/sdk/pnp/android/mfa.mdx",sourceDirName:"sdk/pnp/android",slug:"/sdk/pnp/android/mfa",permalink:"/docs/sdk/pnp/android/mfa",draft:!1,unlisted:!1,editUrl:"https://github.com/web3auth/web3auth-docs/edit/master/docs/sdk/pnp/android/mfa.mdx",tags:[],version:"current",frontMatter:{title:"Multi Factor Authentication in PnP Android SDK",sidebar_label:"Multi Factor Authentication",displayed_sidebar:"sdk",description:"Web3Auth PnP Android SDK - Multi Factor Authentication | Documentation - Web3Auth"},sidebar:"sdk",previous:{title:"Custom Authentication",permalink:"/docs/sdk/pnp/android/custom-authentication"},next:{title:"dApp Share",permalink:"/docs/sdk/pnp/android/dapp-share"}},d={},u=[{value:"Using the <code>mfaSettings</code> to configure MFA Order",id:"using-the-mfasettings-to-configure-mfa-order",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"At Web3Auth, we prioritize your security by offering Multi-Factor Authentication (MFA). MFA is an extra layer of protection that verifies your\nidentity when accessing your account. To ensure ownership, you must provide two or more different backup factors. You have the option to choose from\nthe device, social, backup factor (seed phrase), and password factors to guarantee access to your Web3 account. Once you create a recovery factor, MFA\nis enabled, and your keys are divided into three shares for off-chain multi-sig, making the key self-custodial. With backup factors, you can easily\nrecover your account if you lose access to your original device or helps login into a new device."}),"\n",(0,r.jsxs)(t.p,{children:["You can set the mfaLevel within the ",(0,r.jsx)(t.code,{children:"loginParams"})," to customize when mfa screen should be shown to user. It currently accepts 4 values:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"default"})})," - Setting the mfaLevel to default will present the MFA screen to user on every third login. ",(0,r.jsx)(t.code,{children:"mfaLevel = MFALevel.DEFAULT"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"optional"})})," - Setting mfaLevel to optional will present the MFA screen to user on every login but user will have the option to skip it.\n",(0,r.jsx)(t.code,{children:"mfaLevel = MFALevel.OPTIONAL"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"mandatory"})})," - Setting mfaLevel to mandatory will make it mandatory for user to setup MFA after login. ",(0,r.jsx)(t.code,{children:"mfaLevel = MFALevel.MANDATORY"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"none"})})," - Setting mfaLevel to none will skip the mfa setup screen totally. ",(0,r.jsx)(t.code,{children:"mfaLevel = MFALevel.NONE"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["To trigger the MFA flow after authentication, you can use ",(0,r.jsx)(t.code,{children:"enableMFA"})," method."]}),"\n",(0,r.jsx)(t.admonition,{title:"Note",type:"caution",children:(0,r.jsx)(t.p,{children:"If you are using default verifiers, your users may have set up MFA on other dApps that also use default Web3Auth verifiers. In this case, the MFA\nscreen will continue to appear if the user has enabled MFA on other dApps. This is because MFA cannot be turned off once it is enabled."})}),"\n",(0,r.jsx)(t.admonition,{title:"Minimum Growth plan required",type:"note",children:(0,r.jsxs)(t.p,{children:["This is a paid feature and the the minimum ",(0,r.jsx)(t.a,{href:"https://web3auth.io/pricing.html",children:"pricing plan"})," to use this SDK in a production environment is the\n",(0,r.jsx)(t.strong,{children:"Growth Plan"}),". You can use this feature in the development environment for free."]})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-kotlin",children:"web3Auth.login(LoginParams(selectedLoginProvider, mfaLevel = MFALevel.MANDATORY))\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-kotlin",metastring:'title="Usage"',children:"import android.widget.Button\nimport com.web3auth.core.Web3Auth\nimport android.os.Bundle\n\nclass MainActivity : AppCompatActivity() {\n\tprivate lateinit var web3Auth: Web3Auth\n\n\tprivate fun signIn() {\n\t\tval selectedLoginProvider = Provider.GOOGLE\n\t\t// Can be GOOGLE, FACEBOOK, TWITCH etc.\n\n\t\t// MFA Level is set Mandatory here.\n\t\t// `mfaLevel = MFALevel.MANDATORY`\n\t\tval loginCompletableFuture: CompletableFuture<Web3AuthResponse> =\n\t\t\t\tweb3Auth.login(LoginParams(selectedLoginProvider,\n\t\t\t\t\t\t// highlight-next-line\n\t\t\t\t\t\tmfaLevel = MFALevel.MANDATORY))\n\n\t\tloginCompletableFuture.whenComplete { loginResponse, error ->\n\t\t\tif (error == null) {\n\t\t\t\t// render logged in UI\n\t\t\t} else {\n\t\t\t\t// render error UI\n\t\t\t}\n\n\t\t}\n\t}\n\n\toverride fun onCreate(savedInstanceState: Bundle?) {\n\t\t// ...\n\t    // Setup UI and event handlers\n\t\tval signInButton = findViewById<Button>(R.id.signInButton)\n\t\tsignInButton.setOnClickListener { signIn() }\n\t\t// ...\n\t}\n\t// ...\n}\n"})}),"\n",(0,r.jsxs)(t.h2,{id:"using-the-mfasettings-to-configure-mfa-order",children:["Using the ",(0,r.jsx)(t.code,{children:"mfaSettings"})," to configure MFA Order"]}),"\n",(0,r.jsx)(t.admonition,{title:"Minimum SCALE plan required",type:"note",children:(0,r.jsxs)(t.p,{children:["This is a paid feature and the the minimum ",(0,r.jsx)(t.a,{href:"https://web3auth.io/pricing.html",children:"pricing plan"})," to use this SDK in a production environment is the ",(0,r.jsx)(t.strong,{children:"SCALE\nPlan"}),". You can use this feature in the development environment for free."]})}),"\n",(0,r.jsxs)(t.p,{children:["You can configure the order of MFA or enable/disable MFA type by passing the ",(0,r.jsx)(t.code,{children:"mfaSettings"})," object in ",(0,r.jsx)(t.code,{children:"Web3AuthOptions"}),"."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"MfaSettings"})}),"\n",(0,r.jsxs)(o.Z,{defaultValue:"table",values:[{label:"Table",value:"table"},{label:"Class",value:"class"}],children:[(0,r.jsxs)(i.Z,{value:"table",children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"deviceShareFactor"})," | ",(0,r.jsx)(t.code,{children:"backUpShareFactor"})," | ",(0,r.jsx)(t.code,{children:"socialBackupFactor"})," | ",(0,r.jsx)(t.code,{children:"passwordFactor"})]}),(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Mandatory"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"enable"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"bool"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Enable/Disable MFA"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"priority"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"int"})}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Priority of MFA"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"mandatory"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"bool"})}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Mandatory/Optional MFA"})]})]})]})]}),(0,r.jsx)(i.Z,{value:"class",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-kotlin",children:"\tdata class MfaSetting(\n\t\tvar enable: Boolean,\n\t\tvar priority: Int?,\n\t\tvar mandatory: Boolean?\n\t)\n\n\tdata class MfaSettings(\n\t\tprivate var deviceShareFactor: MfaSetting? = null,\n\t\tprivate var backUpShareFactor: MfaSetting? = null,\n\t\tprivate var socialBackupFactor: MfaSetting? = null,\n\t\tprivate var passwordFactor: MfaSetting? = null,\n\t)\n"})})})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-kotlin",children:'\tweb3Auth = Web3Auth(\n           Web3AuthOptions(\n               context = this,\n               clientId = getString(R.string.web3auth_project_id), // pass over your Web3Auth Client ID from Developer Dashboard\n               network = Network.SAPPHIRE_MAINNET, // pass over the network you want to use (MAINNET or TESTNET or CYAN, AQUA, SAPPHIRE_MAINNET or SAPPHIRE_TESTNET)\n               buildEnv = BuildEnv.PRODUCTION,\n               redirectUrl = Uri.parse("com.w3a.web3authdemoapp://auth"), // your app\'s redirect URL\n               // Optional parameters\n               whiteLabel = WhiteLabelData(\n                   "Web3Auth Android FireBase Example",\n                   null,\n                   null,\n                   null,\n                   Language.EN,\n                   ThemeModes.LIGHT,\n                   true,\n                   hashMapOf(\n                       "primary" to "#eb5424"\n                   )\n               ),\n\t\t\t       // highlight-start\n               mfaSettings = MfaSettings(\n                   deviceShareFactor = MfaSetting(true, 1, true),\n                   socialBackupFactor = MfaSetting(true, 2, false),\n                   passwordFactor = MfaSetting(true, 3, false),\n                   backUpShareFactor = MfaSetting(true, 4, false),\n               )\n\t\t\t      // highlight-end\n\t\t\t\t... // add your loginconfig\n           )\n       )\n'})})]})}function p(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},85162:(e,t,n)=>{n.d(t,{Z:()=>o});n(67294);var r=n(36905);const a={tabItem:"tabItem_Ymn6"};var i=n(85893);function o(e){let{children:t,hidden:n,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,o),hidden:n,children:t})}},74866:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(67294),a=n(36905),i=n(12466),o=n(16550),s=n(20469),l=n(91980),c=n(67392),d=n(50012);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const a=(0,o.k6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(i),(0,r.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(a.location.search);t.set(i,e),a.replace({...a.location,search:t.toString()})}),[i,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,i=h(e),[o,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:i}))),[c,u]=f({queryString:n,groupId:a}),[m,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,i]=(0,d.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:a}),g=(()=>{const e=c??m;return p({value:e,tabValues:i})?e:null})();(0,s.Z)((()=>{g&&l(g)}),[g]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),b(e)}),[u,b,i]),tabValues:i}}var b=n(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=n(85893);function x(e){let{className:t,block:n,selectedValue:r,selectValue:o,tabValues:s}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),d=e=>{const t=e.currentTarget,n=l.indexOf(t),a=s[n].value;a!==r&&(c(t),o(a))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t),children:s.map((e=>{let{value:t,label:n,attributes:i}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:u,onClick:d,...i,className:(0,a.Z)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function j(e){let{lazy:t,children:n,selectedValue:a}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function A(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,a.Z)("tabs-container",g.tabList),children:[(0,v.jsx)(x,{...e,...t}),(0,v.jsx)(j,{...e,...t})]})}function y(e){const t=(0,b.Z)();return(0,v.jsx)(A,{...e,children:u(e.children)},String(t))}},11151:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>o});var r=n(67294);const a={},i=r.createContext(a);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);