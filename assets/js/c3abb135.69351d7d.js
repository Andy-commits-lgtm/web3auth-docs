"use strict";(self.webpackChunkweb3auth_docs=self.webpackChunkweb3auth_docs||[]).push([[97831],{60309:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var r=t(85893),a=t(11151),i=t(74866),o=t(85162);const s={title:"Common Provider",displayed_sidebar:"sdk",description:"Other Provider for Private Key | Documentation - Web3Auth"},l=void 0,c={id:"sdk/helper-sdks/providers/common",title:"Common Provider",description:"Other Provider for Private Key | Documentation - Web3Auth",source:"@site/docs/sdk/helper-sdks/providers/common.mdx",sourceDirName:"sdk/helper-sdks/providers",slug:"/sdk/helper-sdks/providers/common",permalink:"/docs/sdk/helper-sdks/providers/common",draft:!1,unlisted:!1,editUrl:"https://github.com/web3auth/web3auth-docs/edit/master/docs/sdk/helper-sdks/providers/common.mdx",tags:[],version:"current",frontMatter:{title:"Common Provider",displayed_sidebar:"sdk",description:"Other Provider for Private Key | Documentation - Web3Auth"},sidebar:"sdk",previous:{title:"XRPL Provider",permalink:"/docs/sdk/helper-sdks/providers/xrpl"},next:{title:"Web3Auth MPC Core Kit Web SDK",permalink:"/docs/sdk/core-kit/mpc-core-kit/"}},d={},u=[{value:"<code>@web3auth/base-provider</code>",id:"web3authbase-provider",level:2},{value:"Installation",id:"installation",level:2},{value:"<code>@web3auth/base-provider</code>",id:"web3authbase-provider-1",level:4},{value:"Initialisation",id:"initialisation",level:2},{value:"Assign the <code>CommonPrivateKeyProvider</code> class to a variable",id:"assign-the-commonprivatekeyprovider-class-to-a-variable",level:3},{value:"Setting up the provider",id:"setting-up-the-provider",level:2},{value:"For Web3Auth PnP Web SDKs",id:"for-web3auth-pnp-web-sdks",level:3},{value:"For Single Factor Auth Web SDK",id:"for-single-factor-auth-web-sdk",level:3},{value:"Usage",id:"usage",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"web3authbase-provider",children:(0,r.jsx)(n.a,{href:"https://npmjs.com/package/@web3auth/base-provider",children:(0,r.jsx)(n.code,{children:"@web3auth/base-provider"})})}),"\n",(0,r.jsxs)(n.p,{children:["For connecting to blockchains other than EVM, Solana, and XRPL, you need to use the private key from Web3Auth and manually make RPC calls to the\nblockchain. This flow is facilitated by ",(0,r.jsx)(n.code,{children:"@web3auth/base-provider"})," package."]}),"\n",(0,r.jsx)(n.p,{children:"In this section, we'll explore more about how you can use this provider with our SDKs."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.h4,{id:"web3authbase-provider-1",children:(0,r.jsx)(n.a,{href:"https://npmjs.com/package/@web3auth/base-provider",children:(0,r.jsx)(n.code,{children:"@web3auth/base-provider"})})}),"\n",(0,r.jsxs)(i.Z,{groupId:"npm2yarn",children:[(0,r.jsx)(o.Z,{value:"npm",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install --save @web3auth/base-provider\n"})})}),(0,r.jsx)(o.Z,{value:"yarn",label:"Yarn",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"yarn add @web3auth/base-provider\n"})})}),(0,r.jsx)(o.Z,{value:"pnpm",label:"pnpm",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm add @web3auth/base-provider\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"initialisation",children:"Initialisation"}),"\n",(0,r.jsxs)(n.p,{children:["Import the ",(0,r.jsx)(n.code,{children:"CommonPrivateKeyProvider"})," ",(0,r.jsx)(n.strong,{children:"class"})," from ",(0,r.jsx)(n.code,{children:"@web3auth/base-provider"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'import { CommonPrivateKeyProvider } from "@web3auth/base-provider";\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"assign-the-commonprivatekeyprovider-class-to-a-variable",children:["Assign the ",(0,r.jsx)(n.code,{children:"CommonPrivateKeyProvider"})," class to a variable"]}),"\n",(0,r.jsx)(n.p,{children:"After creating your Web3Auth instance, you need to initialize the CommonPrivateKeyProvider and add it to a class for further usage."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const privateKeyProvider = new CommonPrivateKeyProvider();\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Note",type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The common private key provider only exposes one RPC method (i.e. 'private_key') to get the private key of the logged-in user."}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-the-provider",children:"Setting up the provider"}),"\n",(0,r.jsx)(n.h3,{id:"for-web3auth-pnp-web-sdks",children:"For Web3Auth PnP Web SDKs"}),"\n",(0,r.jsxs)(n.p,{children:["If you are using ",(0,r.jsx)(n.code,{children:'chainNamespace: "other"'})," while initializing ",(0,r.jsx)(n.code,{children:"Web3Auth"})," or ",(0,r.jsx)(n.code,{children:"Web3AuthNoModal"})," with the ",(0,r.jsx)(n.code,{children:"OpenloginAdapter"}),", you need to add the\n",(0,r.jsx)(n.code,{children:"privateKeyProvider"})," to the OpenLogin instance."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'const chainConfig = {\n    chainId: "0x1",\n    chainNamespace: CHAIN_NAMESPACES.OTHER,\n    rpcTarget: "https://any-rpc-endpoint.com",\n};\n\nconst web3auth = new Web3AuthNoModal({\n  clientId,\n  chainConfig,\n  web3AuthNetwork: "sapphire_mainnet",\n});\n\nconst privateKeyProvider = new CommonPrivateKeyProvider(config: chainConfig);\n\nconst openloginAdapter = new OpenloginAdapter({\n  privateKeyProvider,\n  adapterSettings: {...},\n  mfaSettings: {...},\n  loginSettings: {...},\n});\nweb3auth.configureAdapter(openloginAdapter);\n\nconst web3authProvider = await web3auth.connectTo(\n  WALLET_ADAPTERS.OPENLOGIN,\n  {\n    loginProvider: "google",\n  }\n);\n\n// Use this provider to export the private key of the user\n'})}),"\n",(0,r.jsx)(n.h3,{id:"for-single-factor-auth-web-sdk",children:"For Single Factor Auth Web SDK"}),"\n",(0,r.jsx)(n.p,{children:"While using the SFA Web SDK, you need to pass the provider during the initialization of SDK, while calling the init() function."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'const chainConfig = {\n  chainId: "0x1",\n  chainNamespace: CHAIN_NAMESPACES.OTHER,\n  rpcTarget: "https://any-rpc-endpoint.com",\n};\n\nconst web3authSfa = new Web3Auth({\n  clientId, // Get your Client ID from the Web3Auth Dashboard\n  chainConfig,\n  web3AuthNetwork: "sapphire_mainnet",\n  usePnPKey: false, // Setting this to true returns the same key as PnP Web SDK, By default, this SDK returns CoreKitKey.\n});\n\nconst privateKeyProvider = new CommonPrivateKeyProvider(config: chainConfig);\n\nweb3authSfa.init(privateKeyProvider);\n\nconst web3authSfaprovider = await web3auth.connect({\n  verifier: "web3auth-sfa-verifier", // e.g. `web3auth-sfa-verifier` replace with your verifier name, and it has to be on the same network passed in init().\n  verifierId: "name@email.com", // e.g. `Yux1873xnibdui` or `name@email.com` replace with your verifier id(sub or email)\'s value.\n  idToken: "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlRZT2dnXy01RU9FYmxhWS1WVlJZcVZhREFncHRuZktWNDUzNU1aUEMwdzAifQ.eyJpYXQiOjE2ODY4OTMzMzYsImF1ZCI6IkJIcl9kS2N4QzBlY0tuXzJkWlFtUWVOZGpQZ1d5a01rY29kRUhrVnZQTW83MXF6T1Y2U2d0b044S0N2RmRMTjdiZjM0Sk9tODl2V1FNTEZtU2ZJbzg0QSIsIm5vbmNlIjoiMDM0MGU2MDJlYzM4YTE2YzE1N2MzMDA3Yjk5YjFmZGNmMzU3MzFjNjIwOTVjMmMzMTk4ZDllNThhYWQwODVhMTZmIiwiaXNzIjoiaHR0cHM6Ly9hcGkub3BlbmxvZ2luLmNvbSIsIndhbGxldHMiOlt7InB1YmxpY19rZXkiOiIwMjcxNTk2YTkyZjJmZjM4ZDZhMTU1ZmIwZjMwNjcxMzZhMzQ4MTUwODY1NjlmMTgzYjZlYzQwZWEzNjA4OTI3NjEiLCJ0eXBlIjoid2ViM2F1dGhfYXBwX2tleSIsImN1cnZlIjoic2VjcDI1NmsxIn1dLCJlbWFpbCI6InNoYWhiYXpAdG9yLnVzIiwibmFtZSI6Ik1vaGFtbWFkIFNoYWhiYXogQWxhbSIsInByb2ZpbGVJbWFnZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FBY0hUdGNOWmFacUkwNjQyXzJVdjBiSDFDeHEwQVZtX09ES09KNnR2THpXPXM5Ni1jIiwidmVyaWZpZXIiOiJ0b3J1cyIsInZlcmlmaWVySWQiOiJzaGFoYmF6QHRvci51cyIsImFnZ3JlZ2F0ZVZlcmlmaWVyIjoidGtleS1nb29nbGUtbHJjIiwiZXhwIjoxNjg2OTc5NzM2fQ.uoRbO9fvLyYEq3-X-osNlP4pda7aASKko0dm7EsmQvA-uq7cKFJWgAD8S9jC8ZogiEtJ6MRnjDYY8UdTwBL7mQ", // replace with your newly created unused JWT Token.\n});\n\n// use this provider to export the private key of the user\n'})}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsxs)(n.p,{children:["On connection, you can use this ",(0,r.jsx)(n.code,{children:"provider"})," as a private key provider to expose the user's private key in the frontend context"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'//Assuming the user is already logged in.\nasync getPrivateKey() {\n    const privateKey = await web3authSfaprovider.request({\n        method: "private_key"\n    });\n    //Do something with privateKey\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>o});t(67294);var r=t(36905);const a={tabItem:"tabItem_Ymn6"};var i=t(85893);function o(e){let{children:n,hidden:t,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,o),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>y});var r=t(67294),a=t(36905),i=t(12466),o=t(16550),s=t(20469),l=t(91980),c=t(67392),d=t(50012);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:a}}=e;return{value:n,label:t,attributes:r,default:a}}))}(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,o.k6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l._X)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(a.location.search);n.set(i,e),a.replace({...a.location,search:n.toString()})}),[i,a])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,i=h(e),[o,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i}))),[c,u]=m({queryString:t,groupId:a}),[v,b]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,i]=(0,d.Nk)(t);return[a,(0,r.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:a}),f=(()=>{const e=c??v;return p({value:e,tabValues:i})?e:null})();(0,s.Z)((()=>{f&&l(f)}),[f]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),b(e)}),[u,b,i]),tabValues:i}}var b=t(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(85893);function j(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:s}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),a=s[t].value;a!==r&&(c(n),o(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":t},n),children:s.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:u,onClick:d,...i,className:(0,a.Z)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function w(e){let{lazy:n,children:t,selectedValue:a}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function x(e){const n=v(e);return(0,g.jsxs)("div",{className:(0,a.Z)("tabs-container",f.tabList),children:[(0,g.jsx)(j,{...e,...n}),(0,g.jsx)(w,{...e,...n})]})}function y(e){const n=(0,b.Z)();return(0,g.jsx)(x,{...e,children:u(e.children)},String(n))}},11151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>o});var r=t(67294);const a={},i=r.createContext(a);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);