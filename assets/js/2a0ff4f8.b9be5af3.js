"use strict";(self.webpackChunkweb3auth_docs=self.webpackChunkweb3auth_docs||[]).push([[17866],{53075:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>u,toc:()=>c});var s=n(85893),r=n(11151),l=n(74866),i=n(85162);const o={title:"Bundler Polyfill Issues - Svelte with Vite",image:"/docs/images/docs-meta-cards/troubleshoot-card.png",displayed_sidebar:"docs",description:"Bundler Polyfill Issues - Svelte with Vite | Documentation - Web3Auth"},a=void 0,u={id:"troubleshooting/svelte-issues",title:"Bundler Polyfill Issues - Svelte with Vite",description:"Bundler Polyfill Issues - Svelte with Vite | Documentation - Web3Auth",source:"@site/docs/troubleshooting/svelte-issues.mdx",sourceDirName:"troubleshooting",slug:"/troubleshooting/svelte-issues",permalink:"/docs/troubleshooting/svelte-issues",draft:!1,unlisted:!1,editUrl:"https://github.com/web3auth/web3auth-docs/edit/master/docs/troubleshooting/svelte-issues.mdx",tags:[],version:"current",frontMatter:{title:"Bundler Polyfill Issues - Svelte with Vite",image:"/docs/images/docs-meta-cards/troubleshoot-card.png",displayed_sidebar:"docs",description:"Bundler Polyfill Issues - Svelte with Vite | Documentation - Web3Auth"},sidebar:"docs",previous:{title:"Bundler Polyfill Issues - Vite",permalink:"/docs/troubleshooting/vite-issues"},next:{title:"Bundler Polyfill Issues - React Native Metro",permalink:"/docs/troubleshooting/metro-issues"}},d={},c=[{value:"Install the missing modules",id:"install-the-missing-modules",level:2},{value:"Update your <code>vite.config.js</code>",id:"update-your-viteconfigjs",level:2},{value:"Address additional dependency issues",id:"address-additional-dependency-issues",level:2}];function h(e){const t={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["When developing a new web3 project with Svelte and Vite, you may encounter bundler issues due to missing polyfills. This commonly occurs with packages\nlike ",(0,s.jsx)(t.code,{children:"eccrypto"})," which rely on node modules not present in the browser environment. Directly adding these modules to your package can solve the issue\nbut may lead to a larger bundle size, affecting load times and user experience."]}),"\n",(0,s.jsx)(t.p,{children:"It's essential to recognize that the required node polyfills should only be included during development and testing, and the bundler should be\ninstructed to exclude them from the production build."}),"\n",(0,s.jsx)(t.p,{children:"The following guide provides instructions for adding the necessary polyfills in a Svelte project using Vite."}),"\n",(0,s.jsx)(t.h2,{id:"install-the-missing-modules",children:"Install the missing modules"}),"\n",(0,s.jsxs)(t.p,{children:["First, identify the missing libraries in your build. For integrating Web3Auth with Svelte, you will need to polyfill ",(0,s.jsx)(t.code,{children:"buffer"})," and ",(0,s.jsx)(t.code,{children:"process"}),". For other\nlibraries, use an alternative like the ",(0,s.jsx)(t.code,{children:"empty-module"})," to prevent build warnings."]}),"\n",(0,s.jsxs)(l.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(i.Z,{value:"npm",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm install --save-dev buffer process vite-plugin-node-polyfills\n"})})}),(0,s.jsx)(i.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"yarn add --dev buffer process vite-plugin-node-polyfills\n"})})}),(0,s.jsx)(i.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"pnpm add --save-dev buffer process vite-plugin-node-polyfills\n"})})})]}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsx)(t.p,{children:"You may need to polyfill additional libraries depending on the other blockchain libraries you are using with Web3Auth. Common polyfills include\ncrypto-browserify, stream-browserify, and others listed in the previous guide."})}),"\n",(0,s.jsxs)(t.h2,{id:"update-your-viteconfigjs",children:["Update your ",(0,s.jsx)(t.code,{children:"vite.config.js"})]}),"\n",(0,s.jsx)(t.p,{children:"Modify your Vite configuration to integrate the polyfills with Svelte as follows:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:'import { sveltekit } from "@sveltejs/kit/vite";\nimport { defineConfig } from "vitest/config";\nimport { nodePolyfills } from "vite-plugin-node-polyfills";\n\nexport default defineConfig({\n  plugins: [\n    nodePolyfills({\n      exclude: ["fs"],\n      globals: {\n        Buffer: true,\n        global: true,\n        process: true,\n      },\n      protocolImports: true,\n    }),\n    sveltekit(),\n  ],\n  optimizeDeps: {\n    include: ["dayjs/plugin/relativeTime.js", "dayjs", "@web3auth/ethereum-provider"],\n  },\n  test: {\n    include: ["src/**/*.{test,spec}.{js,ts}"],\n  },\n});\n'})}),"\n",(0,s.jsx)(t.p,{children:"This configuration sets up the necessary aliases and defines globals for the browser environment, ensuring compatibility and reducing bundle size."}),"\n",(0,s.jsx)(t.h2,{id:"address-additional-dependency-issues",children:"Address additional dependency issues"}),"\n",(0,s.jsx)(t.p,{children:"If there are additional dependencies that need to be polyfilled, consider adding them to the include array in the optimizeDeps section of the Vite\nconfig. Test your application thoroughly to ensure that all functionalities work as expected after the polyfills are added."}),"\n",(0,s.jsx)(t.p,{children:"By following these steps, you should be able to resolve bundler polyfill issues in your Svelte and Vite web3 project, leading to a more efficient\nbuild and a smoother user experience."})]})}function p(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},85162:(e,t,n)=>{n.d(t,{Z:()=>i});n(67294);var s=n(36905);const r={tabItem:"tabItem_Ymn6"};var l=n(85893);function i(e){let{children:t,hidden:n,className:i}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,s.Z)(r.tabItem,i),hidden:n,children:t})}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var s=n(67294),r=n(36905),l=n(12466),i=n(16550),o=n(20469),a=n(91980),u=n(67392),d=n(50012);function c(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,s.useMemo)((()=>{const e=t??function(e){return c(e).map((e=>{let{props:{value:t,label:n,attributes:s,default:r}}=e;return{value:t,label:n,attributes:s,default:r}}))}(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const r=(0,i.k6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,a._X)(l),(0,s.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(r.location.search);t.set(l,e),r.replace({...r.location,search:t.toString()})}),[l,r])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,l=h(e),[i,a]=(0,s.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:l}))),[u,c]=f({queryString:n,groupId:r}),[m,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,l]=(0,d.Nk)(n);return[r,(0,s.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:r}),g=(()=>{const e=u??m;return p({value:e,tabValues:l})?e:null})();(0,o.Z)((()=>{g&&a(g)}),[g]);return{selectedValue:i,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);a(e),c(e),b(e)}),[c,b,l]),tabValues:l}}var b=n(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=n(85893);function y(e){let{className:t,block:n,selectedValue:s,selectValue:i,tabValues:o}=e;const a=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.o5)(),d=e=>{const t=e.currentTarget,n=a.indexOf(t),r=o[n].value;r!==s&&(u(t),i(r))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;t=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;t=a[n]??a[a.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t),children:o.map((e=>{let{value:t,label:n,attributes:l}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,ref:e=>a.push(e),onKeyDown:c,onClick:d,...l,className:(0,r.Z)("tabs__item",g.tabItem,l?.className,{"tabs__item--active":s===t}),children:n??t},t)}))})}function x(e){let{lazy:t,children:n,selectedValue:r}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function j(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,r.Z)("tabs-container",g.tabList),children:[(0,v.jsx)(y,{...e,...t}),(0,v.jsx)(x,{...e,...t})]})}function w(e){const t=(0,b.Z)();return(0,v.jsx)(j,{...e,children:c(e.children)},String(t))}},11151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>i});var s=n(67294);const r={},l=s.createContext(r);function i(e){const t=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(l.Provider,{value:t},e.children)}}}]);