---
title: OpenLogin-Swift-SDK
sidebar_label: iOS (Swift)
---

## Requirements

- iOS 12+ (older version support coming soon)
- Xcode 11.4+ / 12.x
- Swift 4.x / 5.x

## Installation

If you are using the Swift Package Manager, open the following menu item in Xcode:

- **File > Swift Packages > Add Package Dependency...**

In the Choose Package Repository prompt add this url:

```
https://github.com/torusresearch/openlogin-swift-sdk
```

## Initialization

Authentication with In-App Web-based Flow (iOS 12+):

1. Import **OpenLogin** into your project.

```swift
import OpenLogin
```

2. Present the In-App Web-based Login modal.

```swift
 OpenLogin
    .webAuth()
    .start {
        switch $0 {
        case .success(let result):
            print("""
                Signed in successfully!
                    Private key: \(result.privKey)
                    User info:
                        Name: \(result.userInfo.name)
                        Profile image: \(result.userInfo.profileImage ?? "N/A")
                        Type of login: \(result.userInfo.typeOfLogin)
                """)
        case .failure(let error):
            print("Error: \(error)")
        }
    }
```

## Configuration

In order to use OpenLogin you need to provide your OpenLogin **ClientId** and which **Network** to run it.

Go to [Torus Developer](https://dashboard.web3auth.io), create or open an existing OpenLogin project and copy your project ID, which is the
**ClientId**.

In your application bundle add a plist file named **OpenLogin.plist** with the following information:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>ClientId</key>
  <string>YOUR_OPENLOGIN_CLIENT_ID</string>
  <key>Network</key>
  <string>mainnet | testnet</string>
</dict>
</plist>
```

## OpenLogin module providers

### `webAuth(bundle)`

OpenLogin component for authenticating with web-based flow. Parameters are loaded from the file `OpenLogin.plist` in your bundle with the following
content

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>ClientId</key>
        <string>{YOUR_CLIENT_ID}</string>
        <key>Network</key>
        <string>mainnet|testnet</string>
    </dict>
</plist>
```

| Parameter | Type   | Mandatory | Description                                                                 |
| --------- | ------ | --------- | --------------------------------------------------------------------------- |
| bundle    | Bundle | No        | Bundle to locate the `OpenLogin.plist` file. By default is the main bundle. |

**Returns** OpenLogin WebAuth component

Note: Calling this method without a valid `OpenLogin.plist` will crash your application

**Example**

```swift
import SwiftUI
import OpenLogin

struct ContentView: View {
    var body: some View {
        Button(
            action: {
                OpenLogin
                    .webAuth()
                    .signOut()
                print("signed out.")
            },
            label: {
                Text("Sign Out")
                    .padding()
            }
        )
    }
}
```

### `webAuth(clientId, network)`

OpenLogin component for authenticating with web-based flow

| Parameter | Type         | Mandatory | Description                                      |
| --------- | ------------ | --------- | ------------------------------------------------ |
| clientId  | String       | Yes       | Your OpenLogin project ID                        |
| network   | enum Network | Yes       | Network to run OpenLogin e.g. `mainnet, testnet` |

## WebAuth module providers

### `init(clientId, network)`

Set clientId and network info for web-based authentication flow

| Parameter | Type         | Mandatory | Description                                      |
| --------- | ------------ | --------- | ------------------------------------------------ |
| clientId  | String       | Yes       | Your OpenLogin project ID                        |
| network   | enum Network | Yes       | Network to run OpenLogin e.g. `mainnet, testnet` |

### `start(callback)`

Starts the WebAuth flow by modally presenting a ViewController in the top-most controller. Any on going WebAuth auth session will be automatically
cancelled when starting a new one, and it's corresponding callback with be called with a failure result of `WebAuthError.appCancelled`

| Parameter | Type     | Mandatory | Description                                |
| --------- | -------- | --------- | ------------------------------------------ |
| callback  | Callback | Yes       | called with the result of the WebAuth flow |

**Example**

```swift
import SwiftUI
import OpenLogin

struct ContentView: View {
    var body: some View {
        Button(
            action: {
                OpenLogin
                    .webAuth()
                    .start {
                        switch $0 {
                        case .success(let result):
                            print("""
                                Signed in successfully!
                                    Private key: \(result.privKey)
                                    User info:
                                        Name: \(result.userInfo.name)
                                        Profile image: \(result.userInfo.profileImage ?? "N/A")
                                        Type of login: \(result.userInfo.typeOfLogin)
                                """)
                        case .failure(let error):
                            print("Error: \(error)")
                        }
                    }
            },
            label: {
                Text("Sign In")
                    .padding()
            }
        )
    }
}
```

### `signOut()`

Sign the user out. This methods does not actually sign the user out from the server-side. Instead, it disables fastLogin in the next login actions.

**Example**

```swift
import SwiftUI
import OpenLogin

struct ContentView: View {
    var body: some View {
        Button(
            action: {
                OpenLogin
                    .webAuth("YOUR_PROJECT_ID", "testnet")
                    .signOut()
                print("signed out.")
            },
            label: {
                Text("Sign Out")
                    .padding()
            }
        )
    }
}
```
