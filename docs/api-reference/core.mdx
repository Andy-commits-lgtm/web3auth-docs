---
title: Core
hide_title: true
---

## `@web3auth/core`

This package provides core logic for handling adapters within web3auth. This package acts as a manager for all the adapters. You should use this
package to build your custom UI on top of web3auth.

## `Installation`

<Tabs
  defaultValue="npm"
  values={[
    { label: "npm", value: "npm" },
    { label: "yarn", value: "yarn" },
  ]}>

<TabItem value="npm">

```shell
npm i --save @web3auth/core
```

</TabItem>

<TabItem value="yarn">

```shell
yarn add @web3auth/core
```

</TabItem>

</Tabs>

## `Basic Example`

```ts
import { getOpenloginAdapter, Web3AuthCore, getTorusEvmAdapter } from "@web3auth/core";
import { OpenloginAdapter } from "@web3auth/openlogin-adapter";
import { TorusWalletAdapter } from "@web3auth/torus-evm-adapter";

const web3authCore = new Web3AuthCore({
  chainNamespace: CHAIN_NAMESPACES.EIP155,
  chainId: 3,
})

// add your adapters
const torusEvmAdapter = await TorusWalletAdapter({});
const openloginAdapter = await OpenloginAdapter({
  adapterSettings: {
    network: "testnet",
    clientId: "example-client-id",
    uxMode: "popup",
  },
  loginSettings: {
    relogin: true,
  }
})

web3authCore.configureAdapter(torusEvmAdapter)
web3authCore.configureAdapter(openloginAdapter)

await web3authCore.init()

// connect to any adapter by passing adapter name in connectTo function.
// it will use google social login with openlogin's authentication
await web3authCore.connectTo(openloginAdapter.name, { { loginProvider: "google" } });

```

## `Class Interface`

```ts
class Web3AuthCore extends SafeEventEmitter {
  readonly coreOptions: Web3AuthCoreOptions;
  connectedAdapterName: string | null;
  status: ADAPTER_STATUS_TYPE;
  provider: SafeEventEmitterProvider | null;
  cachedAdapter: string | null;
  protected walletAdapters: Record<string, IAdapter<unknown>>;
  constructor(options: Web3AuthCoreOptions);
  init(): Promise<void>;
  configureAdapter(adapter: IAdapter<unknown>): Web3AuthCore;
  clearCache(): void;
  /**
   * Connect to a specific wallet adapter
   * @param walletName - Key of the walletAdapter to use.
   */
  connectTo<T>(walletName: WALLET_ADAPTER_TYPE, loginParams?: T): Promise<void>;
  logout(): Promise<void>;
  getUserInfo(): Promise<Partial<UserInfo>>;
  protected subscribeToAdapterEvents(walletAdapter: IAdapter<unknown>): void;
  protected checkInitRequirements(): void;
  private cacheWallet;
}
```

## `Usage`

To start with using this package import `Web3AuthCore` class from `@web3auth/core`;

```javascript
import { Web3AuthCore } from "@web3auth/core";
```

Then, create a new instance of web3auth core.

```javascript
const web3authCore = new Web3AuthCore({ chainConfig: { chainId: "0x3", chainNamespace: CHAIN_NAMESPACES.EIP155 } });
```

The Web3Auth constructor takes an object with `Web3AuthCoreOptions` as input.

**Parameters**

- `options` - `Web3AuthCoreOptions`: The options of the constructor

| Parameter     | Type                                                                      | Description                                                                                                       |
| ------------- | ------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| `chainConfig` | `Partial<CustomChainConfig> & Pick<CustomChainConfig, "chainNamespace">;` | You can specify custom chain config for web3auth modal, by default it will use mainnet config of specified chain. |

**Returns**

- `Object`: The web3authCore instance with all its methods and events.

**Reference**

```javascript
interface Web3AuthCoreOptions {
  /**
   * custom chain configuration for chainNamespace
   *
   * @defaultValue mainnet config of provided chainNamespace
   */
  chainConfig: Partial<CustomChainConfig> & Pick<CustomChainConfig, "chainNamespace">;
}
```

## `Configuring Adapters`

- In order to use web3auth core, you need to add adapters to it. You can get adapter instances from the methods available in this package. Table given
  below show the method to get each adapter. In each method you can pass configuration specific to the adapter.

| Adapter            | Package Name                          |
| ------------------ | ------------------------------------- |
| `openlogin`        | `@web3auth/openlogin-adapter`         |
| `custom-auth`      | `@web3auth/customauth-adapter`        |
| `torus-evm`        | `@web3auth/torus-evm-adapter`         |
| `torus-solana`     | `@web3auth/torus-solana-adapter`      |
| `metamask`         | `@web3auth/metamask-adapter`          |
| `phantom`          | `@web3auth/phantom-adapter`           |
| `seedphrase`       | `coming soon...`                      |
| `walletconnect-v1` | `@web3auth/wallet-connect-v1-adapter` |
| `walletconnect-v2` | `coming soon...`                      |

- Api:- You can now configure adapters based on the rules given in table above.
- To configure a adapter create the instance of adapter by using its corresponding package and pass the returned `adapter` instance in
  `configureAdapter` function.

For ex: If you want to configure openlogin adapter, then call import `OpenloginAdapter` from ``@web3auth/openlogin-adapter` package, create an
instance of the adapter along with the configuration and pass the retruned instance in to `web3auth.configureAdapter` as shown in example below.

```ts
import { getOpenloginAdapter, Web3AuthCore, getTorusEvmAdapter } from "@web3auth/core";
import { OpenloginAdapter } from "@web3auth/openlogin-adapter";
import { TorusWalletAdapter } from "@web3auth/torus-evm-adapter";

const web3authCore = new Web3AuthCore({
  chainNamespace: CHAIN_NAMESPACES.EIP155,
  chainId: 3,
})

// add your adapters
const torusEvmAdapter = await TorusWalletAdapter({});
const openloginAdapter = await OpenloginAdapter({ adapterSettings: {
    network: "testnet",
    clientId: "example-client-id",
    uxMode: "popup"
  },
  loginSettings: {
    relogin: true,
  }
})

web3authCore.configureAdapter(torusEvmAdapter)
web3authCore.configureAdapter(openloginAdapter)

await web3authCore.init()

// connect to any adapter by passing adapter name in connectTo function.
// it will use google social login with openlogin's authentication
await web3authCore.connectTo(openloginAdapter.name, { { loginProvider: "google" } });

```

## `Init`

After you are done with configuring your adapters, you can initialize all these adapter by calling `init` function of web3auth core instance.

This method will initialize all the adapter that you have configured.

Note: In case initialization of any adapter fails it will not throw but simply allow you to connect with successfully initialized adapters.

```javascript
await web3auth.init();
```

## `Connecting with an adapter`

After initializing you can login/connect with any adapter by calling `connectTo` function along with adapter name.

- `signature`: `async connectTo<T>(walletName: WALLET_ADAPTER_TYPE, loginParams?: T): Promise<void>`

```javascript
// connect to any adapter by passing adapter name in connectTo function.
// connectTo has two parameters, first is adapter name and second is configuration specific to the adapter.
await web3authCore.connectTo(torusEvmAdapter.name);
```

## `getUserInfo`

You can get the information about connected user by calling `getUserInfo` function.

> Note: This function will return information based on the connected adapter.

```javascript
await web3authCore.getUserInfo();
```

## `logout`

You can disconnect from connected wallet using `logout` function.

```javascript
await web3authCore.logout();
```
