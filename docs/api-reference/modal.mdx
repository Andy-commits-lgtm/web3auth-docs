---
title: Modal
hide_title: true
---


## `@web3auth/web3auth`

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

This package provides main class for using default web3auth modal. It is child class of `core` package.
So you can still call all the functions available in `core` api reference.

## `Installation`



<Tabs
  defaultValue="npm"
  values={[
    { label: "npm", value: "npm" },
    { label: "yarn", value: "yarn" },
  ]}
>


<TabItem value="npm">

```shell
npm i --save @web3auth/web3auth
```

</TabItem>

<TabItem value="yarn">

```shell
yarn add @web3auth/web3auth
```

</TabItem>

</Tabs>



```js

    import { Web3Auth } from "@web3auth/web3auth";

    const web3auth = new Web3Auth({ chainNamespace: CHAIN_NAMESPACES.EIP155, chainId: 3, authType: "DAPP" })

    // subscribe to lifecycle events emitted by web3auth
    subscribeAuthEvents(web3auth: Web3AuthModal) {
      web3auth.on (BASE_ADAPTER_EVENTS.CONNECTED, (adapterName: string)=>{
       console.log("connected to wallet", adapterName)
      })
      web3auth.on(BASE_ADAPTER_EVENTS.CONNECTING, ()=>{
        console.log("connecting")
      })
      web3auth.on(BASE_ADAPTER_EVENTS.DISCONNECTED, ()=>{
        console.log("disconnected")
      })
      web3auth.on(BASE_ADAPTER_EVENTS.ERRORED, (error)=>{
        console.log("errored", error)
      })
    }

    subscribeAuthEvents(this.web3auth)


    const showModal = async () => {
      // configure your adapter to add in modal
      // if you are using modal in `DAPP` `authMode` then
      // either customAuth or openlogin required to be configured.
      const openloginAdapter = await getOpenloginAdapter({
        adapterSettings: {
            network: "testnet",
          /* client id is not required for localhost.
          /* You can get your production openlogin's
          /* client/project id from https://developer.tor.us
          */
            clientId: "localhost-id",
            uxMode: "popup"
      }})

      web3auth.configureAdapter(openloginAdapter);
      await web3auth.initModal();
    }

```

## `Class reference`

```ts
interface Web3AuthOptions {
    chainNamespace: ChainNamespaceType;
    chainId?: number;
    authMode?: "DAPP" | "WALLET";
}

class Web3Auth extends Web3AuthCore {
    loginModal: LoginModal;
    private aggregatorModalConfig;
    constructor(options: Web3AuthOptions);
    initModal(params: {
        modalConfig?: Record<WALLET_ADAPTER_TYPE, ModalConfig>;
    }): Promise<void>;
    connect(): void;
    private initExternalWalletAdapters;
    private subscribeToLoginModalEvents;
}
```

## `Usage`
----------------
To start with using this package import `Web3Auth` class from  `@web3auth/web3auth`;

```javascript
import `Web3Auth` class from  `@web3auth/web3auth`;
```

Then, create a new instance of web3auth.

```javascript
const web3auth = new Web3Auth(options);
```

The Web3Auth constructor takes an object with `Web3AuthOptions` as input.

**Parameters**

- `options` - `Web3AuthOptions`: The options of the constructor


| Parameter | Type | Description |
| -------- | -------- | -------- |
| `chainNamespace`     | `enum`-  (`EIP155`,`SOLANA`)   |  Web3auth supports multiple chains i.e ethereum and solana currently, you need to specify chain namespace which you want to use while creating an instance of web3auth.     |
| `chainId?`     | `number`     |      Numeric chainId for the chainNamespace being used, by default it will be mainnet id for the provided namespace.|
| `authMode?`     | `enum` - (`DAPP`, `WALLET`)    | web3auth provides different adapters for different type of usages. If you are dapp and want to use external wallets like metamask, then you can use the `DAPP` authMode.If you are a wallet and only want to use you own wallet implementations along with customAuth or openlogin, then you should use `WALLET` authMode.    |


**Returns**

- `Object`: The web3auth instance with all its methods and events.

**Reference**

```javascript
interface Web3AuthOptions {
  /**
   * The chain namespace to use. Currently only supports "EIP155" and "SOLANA".
   */
  chainNamespace: ChainNamespaceType;
  /**
   * Numeric chainId for the chainNamespace being used, by default it will be mainnet id for the provided namespace..
   * For ex: it will be ethereum mainnet `1` for "EIP155" and solana mainnet `1` for "SOLANA".
   *
   * @defaultValue mainnnet id of provided chainNamespace
   */
  chainId?: number;

  /**
   * web3auth instance provides different adapters for different type of usages. If you are dapp and want to
   * use external wallets like metamask, then you can use the `DAPP` authMode.
   * If you are a wallet and only want to use you own wallet implementations along with customAuth or openlogin,
   * then you should use `WALLET` authMode.
   *
   * @defaultValue `DAPP`
   */
  authMode?: "DAPP" | "WALLET";
}
```

**Example**

```javascript
 // this instance will create DAPP based modal which
 // uses ropsten network for all the adapters being passed
 // (unless overrided while configuring  adapters, each adapter can be configured
 //  to have its own chainConfig, otherwise each adapter
 //  will inherit chainConfig based on the chainNamespace and chainId passed in the
 //  instance).
const web3auth = new Web3Auth({ chainNamespace: CHAIN_NAMESPACES.EIP155, chainId: 3, authMode: "DAPP" })

```

## `Configuring Adapters`

- By default Web3Auth's modal UI supports a set of default adapters depends of the `authMode` being used. By default, Web3Auth requires basic configuration (client_id, and registering a redirect) from the dashboard.  Other additional optional adapters, like the Torus wallet or
Metamask doesn't requires any additional configuration by default. You can provide your own config for all adapters if you need the additional configuration.

The table below summarizes all the available adapters, their properties, and if they're default or not:-



| Adapter            | AuthMode         | ChainNamespace    |   Default |  Configuration Method      |
| ------------------ | ---------------- | ----------------- |  ---------  | ---------------------------|
| `openlogin`        | `WALLET`, `DAPP`  | `EIP155`,`SOLANA` | `YES`        |  `getOpenloginAdapter`     |
| `custom-auth`      | `WALLET`, `DAPP`  | `EIP155`,`SOLANA` |`YES`        |  `getCustomAuthAdapter`    |
| `torus-evm`        | `DAPP`           | `EIP155`          | `NO`        |  `getTorusEvmAdapter`      |
| `torus-solana`     | `DAPP`              | `SOLANA`          | `NO`        |  `getTorusSolanaAdapter`   |
| `metamask`         | `DAPP`          | `EIP155`          | `NO`        |  `getMetamaskAdapter`      |
| `phantom`          | `DAPP`             | `SOLANA`          | `NO`        |  `getPhantomAdapter`       |
| `seedphrase`       | `WALLET`          | `EIP155`,`SOLANA` | `NO`        |  `getSeedphraseAdapter`    |
| `walletconnect-v1` | `DAPP`            | `EIP155`          | `NO`        |  `getWalletconnectV1Adapter`|
| `walletconnect-v2` | `DAPP`           | `MULTICHAIN`      | `NO`        |  `getWalletconnectV2Adapter`|


- Api:- You can now configure adapters based on the rules given in table above using `configureAdapter` function from `web3auth class`.
- To configure a adapter call the configuration method of the adapter and pass the returned `adapter` instance in `configureAdapter` function.

For ex: If you want to configure openlogin adapter, then call `getOpenloginAdapter` along with the configuration and pass the retruned value of this function in to `web3auth.configureAdapter` as shown in example below.

```ts
   const openloginAdapter = await getOpenloginAdapter({
         adapterSettings: {
              network: "testnet",
            /* client id is not required for localhost.
            /* You can get your production openlogin's
            /* client/project id from https://developer.tor.us
            */
              clientId: "localhost-id",
              uxMode: "popup"
        }})

        web3auth.configureAdapter(openloginAdapter);
```

> Note: You don't have to configure every adapter unless you want to override default configs for the adapter. Only those adapter which are marked as mandatory in above table are required to be configured always based on the `authMode` you are using.

## `Initializing Modal`

After you are done with configuring your adapters, you can initialize modal by calling `initModal` function of `web3auth`.

```javascript
await web3auth.initModal(options);
```

`web3auth.initModal` takes an options config object as input.

**Parameters**

- `options` - `{ modalConfig?: Record<WALLET_ADAPTER_TYPE, ModalConfig> }`: The options of the initModal

- options object contains `modalConfig` field using which  you can configure the visibility of each adapter within the modal. Each modal config has following configuration.



| Parameter | Type | Description |
| -------- | -------- | -------- |
| `showOnModal?` (default: true)    | `boolean`     |     Whether to show an adapter in modal or not. |
| `showOnDesktop?`   (default: true)  | `boolean`     |     Whether to show an adapter in desktop or not. |
| `showOnMobile?`   (default: true)  | `boolean`     |     Whether to show an adapter in mobile or not. |
| `loginMethods?` | `LoginMethodConfig`     |    To configure visibility of each loginMethod within the adapter. |


- Reference:-

```ts
 interface BaseAdapterConfig {
  showOnModal?: boolean;
  showOnMobile?: boolean;
  showOnDesktop?: boolean;
}

LoginConfig = Record<string, {
    verifier: string;
    /**
     * The type of login. Refer to enum `LOGIN_TYPE`
     */
    typeOfLogin: TypeOfLogin;
    /**
     * Display Name. If not provided, we use the default for openlogin app
     */
    name: string;
    /**
     * Description for button. If provided, it renders as a full length button. else, icon button
     */
    description?: string;
    /**
     * Custom client_id. If not provided, we use the default for openlogin app
     */
    clientId?: string;
    verifierSubIdentifier?: string;
    /**
     * Logo to be shown on mouse hover. If not provided, we use the default for openlogin app
     */
    logoHover?: string;
    /**
     * Logo to be shown on dark background (dark theme). If not provided, we use the default for openlogin app
     */
    logoLight?: string;
    /**
     * Logo to be shown on light background (light theme). If not provided, we use the default for openlogin app
     */
    logoDark?: string;
    /**
     * Show login button on the main list
     */
    mainOption?: boolean;
    /**
     * Whether to show the login button on modal or not
     */
    showOnModal?: boolean;
    /**
     * Whether to show the login button on desktop
     */
    showOnDesktop?: boolean;
    /**
     * Whether to show the login button on mobile
     */
    showOnMobile?: boolean;
}>;

    interface ModalConfig extends BaseAdapterConfig {
      loginMethods?: LoginMethodConfig;
    }
```
- `Promise<void>` : Returns a promise which resolves to void

> Note: You cannot change visibility of mandatory adapters. For ex: Openlogin or CustomAuth

<TabItem value="basic">

```ts

   await web3auth.initModal({
      modalConfig: {
        [WALLET_ADAPTERS.CUSTOM_AUTH]: {
          loginMethods: {
            "google": {
              typeOfLogin: "google",
              verifier: "google",
              name: "google login",
              logoDark: "url to your custom logo which will shown in dark mode",
            }
          }
        }
      }
    });
```

</TabItem>


## `Showing modal`

After initializing you can show the modal by calling `connect` function on web3auth instance

```javascript
  await web3authCore.connect();
```

## `getUserInfo`

You can get the information about connected user by calling `getUserInfo` function.

> Note: This function will return information based on the connected adapter.

```javascript
  await web3authCore.getUserInfo();
```

## `logout`

You can disconnect from connected wallet using `logout` function.

```javascript
  await web3authCore.logout();
```
